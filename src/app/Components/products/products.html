<div
  class="group bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-800 hover:border-primary/50 transition-all duration-300 overflow-hidden"
>
  <!-- Product Image -->
  <div class="relative aspect-square overflow-hidden bg-slate-100 dark:bg-slate-900">
    <!-- Favorite Button -->
    <div class="absolute top-3 right-3 z-10">
      <button
        class="p-2 rounded-full bg-white/80 dark:bg-black/20 backdrop-blur-sm text-slate-400 hover:text-red-500 transition-colors"
      >
        <span class="material-symbols-outlined">favorite</span>
      </button>
    </div>

    @if (product.onSale) {
      <div class="absolute top-3 left-3 z-10">
        <span
          class="bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-widest"
          >Sale</span
        >
      </div>
    }

    <div
      class="w-full h-full transition-transform duration-500 group-hover:scale-105 bg-cover bg-center"
      [style.background-image]="
        'url(' +
        (product.image || 'https://placehold.co/400x400/1e293b/64748b?text=' + product.title) +
        ')'
      "
      [attr.data-alt]="product.title"
    ></div>
  </div>

  <!-- Product Details -->
  <div class="p-5">
    <!-- Category -->
    <p class="text-xs font-semibold text-primary mb-1 uppercase tracking-wider">
      {{ product.categoryLabel }}
    </p>

    <!-- Title -->
    <h3 class="text-lg font-bold mb-2 group-hover:text-primary transition-colors line-clamp-1">
      {{ product.title }}
    </h3>

    <!-- Rating -->
    <div class="flex items-center gap-1 mb-3">
      <div class="flex text-yellow-500">
        @for (star of [1, 2, 3, 4, 5]; track star) {
          <span
            class="material-symbols-outlined text-sm"
            [class.text-slate-400]="star > product.rating"
          >
            star
          </span>
        }
      </div>
      <span class="text-xs text-slate-500 font-medium">({{ product.reviews }} reviews)</span>
    </div>

    <!-- Price + Cart -->
    <div class="flex items-center justify-between mt-auto">
      <div class="flex flex-col">
        <span class="text-xl font-black">${{ product.price.toFixed(2) }}</span>
        @if (product.originalPrice) {
          <span class="text-xs text-slate-400 line-through"
            >${{ product.originalPrice.toFixed(2) }}</span
          >
        }
      </div>
      <button
        class="p-2.5 rounded-lg bg-primary text-white hover:bg-primary/90 transition-all shadow-lg shadow-primary/20"
      >
        <span class="material-symbols-outlined">add_shopping_cart</span>
      </button>
    </div>
  </div>
</div>
